{
  "title": "StrategyRegistry",
  "description": "Test cases for StrategyRegistry contract",
  "stories": [
    {
      "description": "Operator should be able to add strategy",
      "setActions": [
        {
          "action": "addStrategy(bytes32,(address,address,bool)[])",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getStrategySteps(bytes32)",
          "args": {},
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Operator should be able to add strategy plan",
      "setActions": [
        {
          "action": "addStrategyPlan(address,bytes32,((bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256)))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getOraValueUTPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getOraValueLPPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getLastStepBalanceLPPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getDepositSomeToStrategyPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getWithdrawSomeFromStrategyPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getClaimRewardsPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getHarvestRewardsPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Non-Operator shouldn't be able to add strategy",
      "setActions": [
        {
          "action": "addStrategy(bytes32,(address,address,bool)[])",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "addStrategies(bytes32[],(address,address,bool)[][])",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        }
      ],
      "getActions": []
    },
    {
      "description": "Non-Operator shouldn't be able to add strategy plan",
      "setActions": [
        {
          "action": "addStrategyPlan(address,bytes32,((bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256)))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "addStrategyPlans(address[],bytes32[],((bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256))[])",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        }
      ],
      "getActions": []
    },
    {
      "description": "Operator cannot set multiple strategies where length mismatch",
      "setActions": [
        {
          "action": "addStrategies(bytes32[],(address,address,bool)[][])",
          "args": {
            "mismatchLength": true
          },
          "executer": "owner",
          "expect": "fail",
          "message": "StrategyRegistry::length mismatch"
        }
      ],
      "getActions": []
    },
    {
      "description": "Operator cannot set multiple strategy plans where length mismatch",
      "setActions": [
        {
          "action": "addStrategyPlans(address[],bytes32[],((bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256))[])",
          "args": {
            "mismatchLength": true
          },
          "executer": "owner",
          "expect": "fail",
          "message": "StrategyRegistry::length mismatch"
        }
      ],
      "getActions": []
    },
    {
      "description": "Operator can set multiple strategies",
      "setActions": [
        {
          "action": "addStrategies(bytes32[],(address,address,bool)[][])",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getStrategySteps(bytes32)",
          "args": {},
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Operator can set multiple strategy plans",
      "setActions": [
        {
          "action": "addStrategyPlans(address[],bytes32[],((bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256),(bytes32[],bytes[],uint256))[])",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getOraValueUTPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getOraValueLPPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getLastStepBalanceLPPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getDepositSomeToStrategyPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getWithdrawSomeFromStrategyPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getClaimRewardsPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        },
        {
          "action": "getHarvestRewardsPlan(address,bytes32)",
          "args": {},
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Only Operator can set ora value UT plan",
      "setActions": [
        {
          "action": "setOraValueUTPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "setOraValueUTPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getOraValueUTPlan(address,bytes32)",
          "args": { "testIndividualFunc": true },
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Only Operator can set ora value LP plan",
      "setActions": [
        {
          "action": "setOraValueLPPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "setOraValueLPPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getOraValueLPPlan(address,bytes32)",
          "args": { "testIndividualFunc": true },
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Only Operator can set last step balance LP plan",
      "setActions": [
        {
          "action": "setLastStepBalanceLPPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "setLastStepBalanceLPPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getLastStepBalanceLPPlan(address,bytes32)",
          "args": { "testIndividualFunc": true },
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Only Operator can set deposit some to strategy plan",
      "setActions": [
        {
          "action": "setDepositSomeToStrategyPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "setDepositSomeToStrategyPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getDepositSomeToStrategyPlan(address,bytes32)",
          "args": { "testIndividualFunc": true },
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Only Operator can set withdraw some from strategy plan",
      "setActions": [
        {
          "action": "setWithdrawSomeFromStrategyPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "setWithdrawSomeFromStrategyPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getWithdrawSomeFromStrategyPlan(address,bytes32)",
          "args": { "testIndividualFunc": true },
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Only Operator can set claim rewards plan",
      "setActions": [
        {
          "action": "setClaimRewardsPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "setClaimRewardsPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getClaimRewardsPlan(address,bytes32)",
          "args": { "testIndividualFunc": true },
          "expectedValue": {}
        }
      ]
    },
    {
      "description": "Only Operator can set harvest rewards plan",
      "setActions": [
        {
          "action": "setHarvestRewardsPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "user1",
          "expect": "fail",
          "message": "caller is not the operator"
        },
        {
          "action": "setHarvestRewardsPlan(address,bytes32,(bytes32[],bytes[],uint256))",
          "args": {},
          "executer": "owner",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "getHarvestRewardsPlan(address,bytes32)",
          "args": { "testIndividualFunc": true },
          "expectedValue": {}
        }
      ]
    }
  ]
}
